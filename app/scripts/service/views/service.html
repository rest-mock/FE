<div ng-if="service.id">
    <h1>{{service.name}}</h1>

    <div>
        <nav class="items-list horizontal-items-list">
            <div ng-repeat="(method, scenarios) in service.responses" ng-click="changeCurrentMethod('{{method}}')" class="items-list-item" ng-class="{'active': currentMethod === method}" ng-style="{'width': 100/service.methodsCount + '%'}">
                <span>{{method | uppercase}}</span>
            </div>
        </nav>

        <div ng-show="currentMethod">
            <ul>
                <li ng-repeat="scenario in service.responses[currentMethod]">{{scenario.name}}</li>
            </ul>
        </div>

        <div>
            <h1>Add a Scenario</h1>
            <form name="addScenarioForm" novalidate role="form">
                <div class="form-group">
                    <label for="scenarioMethod">Method</label>
                    <select ng-required="true" class="form-control" type="text" ng-model="newScenario.method" id="scenarioMethod">
                        <option value="get">GET</option>
                        <option value="post">POST</option>
                        <option value="put">PUT</option>
                        <option value="delete">DELETE</option>
                    </select>
                </div>

                <div class="form-group" ng-class="{'has-error': addScenarioForm.scenarioName.showFormValidationMessage}">
                    <label for="scenarioName">Name</label>
                    <input
                        placeholder="It has products"
                        name="scenarioName"
                        class="form-control" 
                        type="text" 
                        ng-model="newScenario.name" 
                        id="scenarioName"
                        ng-required="true"
                    >

                    <form-validation-messages controller="addScenarioForm.scenarioName"></form-validation-messages>
                </div>

                <div class="form-group" ng-class="{'has-error': addScenarioForm.scenarioResponse.showFormValidationMessage}">
                    <label for="scenarioResponse">Response</label>
                    <textarea
                        placeholder="{ products: [] }"
                        class="form-control"
                        ng-model="newScenario.response"
                        id="scenarioResponse"
                        name="scenarioResponse"
                        ng-required="true"
                        validate-json
                    >
                    </textarea>

                    <form-validation-messages controller="addScenarioForm.scenarioResponse"></form-validation-messages>
                </div>

                <div class="form-group" ng-if="newScenario.pathParams">
                    <h3>Path variables service</h3>

                    <div class="form-group" ng-repeat="param in newScenario.pathParams">
                        <label for="">{{param.key}}</label> <span>(type: {{param.type}})</span>
                        <input class="form-control" type="text" ng-model="param.value">
                    </div>

                </div>

                <div class="form-group">
                    <button type="submit" class="btn btn-success" ng-click="addScenario()" ng-disabled="addScenarioForm.$invalid || addScenarioForm.pristine">Save</button>
                </div>
            </form>
        </div>

    </div>
</div>

<div ng-if="!service.id">This service doesn't exist.</div>